{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/chianc/Documentos/Biblioteca/react-biblioteca/src/LivroForm.js\";\nimport React from 'react';\nimport Input from './forms/Input';\nimport { requiredValidation } from './forms/validations';\nconst validate = {\n  statement: requiredValidation,\n  autor: requiredValidation,\n  descricao: requiredValidation,\n  imagem: requiredValidation\n};\nexport default class LivroForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      livro: {\n        statement: props.livro.statement || '',\n        //nome do livro\n        autor: props.livro.autor || '',\n        descricao: props.livro.descricao || '',\n        imagem: props.livro.imagem || ''\n      },\n      errors: {},\n      touched: {}\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n  }\n\n  onChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    this.setState(state => ({ ...state,\n      livro: { ...state.livro,\n        [name]: value\n      },\n      touched: { ...state.touched,\n        [name]: true\n      }\n    }));\n  }\n\n  onBlur(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    const {\n      [name]: removedError,\n      ...rest\n    } = this.state.errors;\n    const error = validate[name] ? validate[name](value) : null;\n    const nameError = this.state.touched[name] ? error : null;\n    this.setState(state => ({ ...state,\n      errors: { ...rest,\n        [name]: nameError\n      }\n    }));\n  }\n\n  onSubmit(event) {\n    event.preventDefault();\n    const livro = this.state.livro;\n    const validation = Object.keys(livro).reduce((acc, key) => {\n      const error = validate[key] && validate[key](livro[key]);\n      return {\n        errors: { ...acc.errors,\n          ...(error && {\n            [key]: error\n          })\n        },\n        touched: { ...acc.touched,\n          ...{\n            [key]: true\n          }\n        }\n      };\n    }, {});\n    this.setState(state => ({ ...state,\n      errors: validation.errors,\n      touched: validation.touched\n    }));\n    const errorValues = Object.values(validation.errors);\n    const touchedValues = Object.values(validation.touched);\n    const errorsIsEmpty = errorValues.length === 0;\n    const touchedAll = touchedValues.length === Object.values(livro).length;\n    const allTrue = touchedValues.every(t => t === true);\n\n    if (errorsIsEmpty && touchedAll && allTrue) {\n      this.props.onUpdate({\n        statement: livro.statement,\n        autor: livro.autor,\n        descricao: livro.descricao,\n        imagem: livro.imagem\n      });\n    }\n\n    console.log(this.state);\n  }\n\n  onCancel(event) {\n    this.props.onCancel();\n  }\n\n  render() {\n    const commonProps = {\n      values: this.state.livro,\n      errors: this.state.errors,\n      touched: this.state.touched,\n      onChange: this.onChange,\n      onBlur: this.onBlur\n    };\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: this.onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Adicionar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        label: \"T\\xEDtulo\",\n        name: \"statement\",\n        placeholder: \"Digite o t\\xEDtulo do livro\",\n        isRequired: true,\n        ...commonProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        label: \"Autor(a)\",\n        name: \"autor\",\n        placeholder: \"Digite o nome do(a) autor(a) do livro\",\n        isRequired: true,\n        ...commonProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"textarea\",\n        label: \"Descri\\xE7\\xE3o\",\n        name: \"descricao\",\n        placeholder: \"Digite uma breve descri\\xE7\\xE3o da obra\",\n        isRequired: true,\n        ...commonProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"textarea\",\n        label: \"Link\",\n        name: \"imagem\",\n        placeholder: \"Insira o link da imagem do livro ou da p\\xE1gina para download do e-book\",\n        isRequired: true,\n        ...commonProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Cadastrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.onCancel,\n        children: \"Cancelar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/chianc/Documentos/Biblioteca/react-biblioteca/src/LivroForm.js"],"names":["React","Input","requiredValidation","validate","statement","autor","descricao","imagem","LivroForm","Component","constructor","props","state","livro","errors","touched","onChange","bind","onBlur","onSubmit","onCancel","event","name","value","target","setState","removedError","rest","error","nameError","preventDefault","validation","Object","keys","reduce","acc","key","errorValues","values","touchedValues","errorsIsEmpty","length","touchedAll","allTrue","every","t","onUpdate","console","log","render","commonProps"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Input from './forms/Input'\nimport {requiredValidation} from './forms/validations'\n\n\nconst validate = {\n    statement: requiredValidation,\n    autor: requiredValidation,\n    descricao: requiredValidation,\n    imagem: requiredValidation\n  }\n\nexport default class LivroForm extends React.Component{\n    constructor(props) {\n      super(props)\n      this.state = {\n        livro: {  \n            statement: props.livro.statement || '', //nome do livro\n            autor:  props.livro.autor || '',\n            descricao: props.livro.descricao || '',\n            imagem: props.livro.imagem || ''\n        },\n        errors: {},\n        touched: {}\n      }\n      this.onChange = this.onChange.bind(this)\n      this.onBlur = this.onBlur.bind(this)\n      this.onSubmit = this.onSubmit.bind(this)\n      this.onCancel = this.onCancel.bind(this)\n    }\n\n    onChange(event) {\n        const { name, value } = event.target\n        this.setState((state) => ({\n          ...state,\n          livro: { ...state.livro, [name]: value },\n          touched: { ...state.touched, [name]: true }\n        }))\n    }\n\n    onBlur(event) {\n        const { name, value } = event.target\n        const { [name]: removedError, ...rest } = this.state.errors\n        const error = validate[name] ? validate[name](value) : null\n        const nameError = this.state.touched[name] ? error : null\n    \n        this.setState((state) => ({\n          ...state,\n          errors: {\n            ...rest,\n            [name]: nameError\n          }\n        }))\n    }\n    \n    onSubmit(event) {\n        event.preventDefault()\n        const livro = this.state.livro\n\n        const validation = Object.keys(livro).reduce((acc, key) => {\n          const error = validate[key] && validate[key](livro[key])\n          return {\n            errors: {\n              ...acc.errors,\n              ...(error && { [key]: error })\n            },\n            touched: {\n              ...acc.touched,\n              ...{ [key]: true }\n            }\n          }\n        }, {})\n        this.setState((state) => ({\n          ...state,\n          errors: validation.errors,\n          touched: validation.touched\n        }))\n    \n        const errorValues = Object.values(validation.errors)\n        const touchedValues = Object.values(validation.touched)\n        const errorsIsEmpty = errorValues.length === 0\n        const touchedAll = touchedValues.length === Object.values(livro).length\n        const allTrue = touchedValues.every((t) => t === true)\n        if (errorsIsEmpty && touchedAll && allTrue) {\n          this.props.onUpdate({\n            statement: livro.statement,\n            autor:livro.autor,\n            descricao:livro.descricao,\n            imagem:livro.imagem\n          })\n        }\n        console.log(this.state)\n    }\n\n    onCancel(event) {\n      this.props.onCancel()\n    }\n\n    render() {\n        const commonProps = {\n          values: this.state.livro,\n          errors: this.state.errors,\n          touched: this.state.touched,\n          onChange: this.onChange,\n          onBlur: this.onBlur\n        }\n        return (\n          <form onSubmit={this.onSubmit}>\n            <h2>Adicionar</h2>\n            <Input\n              label=\"Título\"\n              name=\"statement\"\n              placeholder=\"Digite o título do livro\"\n              isRequired={true}\n              {...commonProps}\n            />\n            <Input\n              label=\"Autor(a)\"\n              name=\"autor\"\n              placeholder=\"Digite o nome do(a) autor(a) do livro\"\n              isRequired={true}\n              {...commonProps}\n            />\n            <Input\n              type=\"textarea\"  \n              label=\"Descrição\"\n              name=\"descricao\"\n              placeholder=\"Digite uma breve descrição da obra\"\n              isRequired={true}\n              {...commonProps}\n            />\n            <Input\n              type=\"textarea\"  \n              label=\"Link\"\n              name=\"imagem\"\n              placeholder=\"Insira o link da imagem do livro ou da página para download do e-book\"\n              isRequired={true}\n              {...commonProps}\n            />\n            <input type=\"submit\" value=\"Cadastrar\" />\n            <button onClick={this.onCancel}>Cancelar</button>\n          </form>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}